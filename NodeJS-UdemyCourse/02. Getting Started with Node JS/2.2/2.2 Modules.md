# 2.2 Modules [ 22/08/2025 ]

---

## Modules

- `module` â†’ Collection of Code that provides some Functionality
- Node.JS has 3 types of Modules
    1. Built in Modules â†’ Provided by Node as Out of the Box
    2. Third Party Modules [ External Modules ] â†’ provided by `npm` [ using `npm install` ]
    3. Custom Modules â†’ Custom built for Project  

## FS module

- FS â†’ File System Module [ Built in Module ]
- `node:fs` module â†’ Enables Interaction/Working with File System ( read, write, update files, etc. )
- This is NOT JS feature
- This is Node.JS feature
    - As Node.JS is a C++ application,
    - So, It can interact with machineâ€™s Hardware like File System

```jsx
const fs = require('fs');
// Imports fs module & assigning it to a variable

const content = fs.readFileSync('notes.txt', 'utf-8');
/**
 * "fs.readFile" â†’ used to read the contents of a file
 * This reads the contents of the file notes.txt synchronously
 * 'utf-8' specifies the encoding, so the file content is returned as a string, not a raw buffer.
 * The result is stored in the variable content.
 */

console.log(content);
// This prints the contents of notes.txt to the console.
```

## Behind the Scenes

Before a fileâ€™s/module's code is executed, Node.js will wrap it with a module wrapper function 

- Assume the `cript.js` file is executed â†’ `node script.js`
    - contents of script.js file
    
    ```jsx
    const fs = require('fs');
    
    const content = fs.readFileSync('notes.txt', 'utf-8');
    
    console.log(content);
    ```
    
- Now, Node will have a Wrapper function [ IIFE ]
    
    ```jsx
    (function(exports, require, module, __filename, __dirname) {
      // Your module code actually lives here
    });
    ```
    
- Node will wrap this above entire code into this Wrapper Function
    
    ```jsx
    (function(exports, require, module, __filename, __dirname) {
        const fs = require('fs');
        const content = fs.readFileSync('notes.txt', 'utf-8');
        console.log(content);
    });
    ```
    
- Here, this IIFE function has Access to `exports`, `require` etc.. objects as parameters
    - Hence, Node is able to use `exports`, `require` etc.. [ without any error ]
    
    ```jsx
    console.log(__filename);
    console.log(__dirname);
    console.log(exports);
    console.log(require);
    console.log(module);
    // All the above will be printed as part of this WRAPPER function
    ```
    
- This happens to each & every JS file/module
- As it is an IIFE â†’ It gets executed immediately
    - Hence, JS code will get executed line by line [ as part of IIFE function code block ]

## require()

- `require ('module_name')` â†’ Takes module name as a String
- How does it work ?
    - It 1st checks
        - if any 3rd party installations are available on this name [ module name ] & returns it
        - else checks for Built-in Modules on this name & returns it
        - else throws error
    - It also uses Caching for further loading of same module

<aside>
ðŸ’¡

NOTE:

---

Custom modules are loaded using path â†’ `require('./module_name.js')`

- Here, whenever JS sees the dot `(.)`, It knows that it is referring to path
- Hence, Node will look up for module in the specified path along with name

i.e., custom modules and 3rd party & Built in Modules have different syntax 

- which is path
</aside>

---

## `npm`

- `npm` is a software registry [ Worldâ€™s Largest Registry ] and
- `npm` **is default package manager for Node.js**,
    - `package Manager` â†’ used to **install, update, delete & manage dependencies (libraries, tools, and frameworks)** in JavaScript projects.

`npm` consists of three distinct components:

- the registry â†’ A large public database of JS Packages/Software's
- the website â†’ Used to discover & Public Packages
- the Command Line Interface (CLI) â†’ Used to Interact with `npm` from a Terminal